<!-- An ANT build configuration file for the JDiff examples -->
<!-- but using the custom Ant task for JDiff, JDiffAntTask  -->

<project name="examples" default="easyjdiff" basedir=".">

<description>
The Ant target "easyjdiff" uses a custom Ant task for JDiff, named 
JDiffAntTask, to build a simple report. This task compares two versions of
the example SuperProduct source code. The task also generates the Javadoc 
HTML for each version of the source code. 

This is a much simpler Ant build.file than the build.xml, which uses the 
default Ant Javadoc task explcitly. However, there are options that can
be passed to the Javadoc task which are not supported by the JDiffAntTask
task. Also, the Ant task regenerates the XML representation of both projects
each time it is run, which can take a minute for large projects.

Run with: ant -f simple.xml

</description>

<!-- ======================================================== -->
<!-- Use the custom Ant task JDiffAntTask to generate a       -->
<!-- report comparing the source code of two versions of a    -->
<!-- product.                                                 --> 
<!-- taskdef is used to tell Ant where to find the JDiff task -->
<!-- ======================================================== -->
<target name="easyjdiff" depends="init">
  <taskdef name="jdiff" 
           classname="jdiff.JDiffAntTask" 
           classpath="${JDIFF_HOME}/lib/antjdiff.jar"/>

  <jdiff>
    <old name="Version 1">
      <dirset dir="SuperProduct1.0" includes="com/**"/>
    </old>
    <new name="Version 2">
      <dirset dir="SuperProduct2.0" includes="com/**"/>
    </new>
  </jdiff>

</target>

<!-- ========================================================= -->
<!-- Show how to use some more of the JDiff Ant task's options -->
<!-- ========================================================= -->
<target name="easyjdiff2" depends="init">
  <taskdef name="jdiff" 
           classname="jdiff.JDiffAntTask" 
           classpath="${JDIFF_HOME}/lib/antjdiff.jar"/>

  <jdiff destdir="my_jdiff_report" verbose="on" stats="on" docchanges="on" >
    <old name="Version 1">
      <dirset dir="SuperProduct1.0" includes="com/**"/>
    </old>
    <new name="Version 2">
      <dirset dir="SuperProduct2.0" includes="com/acme/**"/>
      <dirset dir="SuperProduct2.0" includes="com/acme/**"/> 
    </new>
  </jdiff>

</target>

<!-- ======================================================= -->
<!-- Properties used when generating JDiff output.           -->
<!-- You should not have to change some of these for this    -->
<!-- build file to work.                                     -->
<!-- ======================================================= -->
<target name="init">
  <property name="app.name" value="JDiff Example using an Ant Task"/>
  <!-- Root of the JDiff hierarchy of directories -->
  <property name="JDIFF_HOME" value=".."/>

  <path id="class.path">
    <pathelement location="${JDIFF_HOME}/lib/xerces.jar"/>
  </path> 
</target>

<!-- ======================================================= -->
<!-- Clean up the directory where example reports are generated.   -->
<!-- ======================================================= -->
<target	name="clean">
  <!-- The default output directory -->
  <delete dir="jdiff_report" includeEmptyDirs="true"/>
  <!-- The output directory specified for easydiff2 -->
  <delete dir="my_jdiff_report" includeEmptyDirs="true"/>
</target>
 	
<target name="usage">
  <echo message="usage: ant easyjdiff"/>
</target>
 
</project>
